import CircuitSvg from '@site/src/components/CircuitSvg';
import LdoU6Svg from '@site/static/circuits/ldo-u6-diagram.svg';

<CircuitSvg
  src={LdoU6Svg}
  alt="LM7812 Linear Regulator U6"
  padding="10px"
/>

**Capacitor Placement (Critical for PCB layout):**
- **C26/C17 (ceramic)**: Place RIGHT NEXT to IC pins (minimize trace length for high-freq filtering)
- **C20/C21 (electrolytic)**: Can be placed farther from IC (bulk storage, less sensitive to distance)

**Key Points:**
- **Two-stage design**: Buck converter (U2) provides efficient voltage reduction, linear regulator (U6) provides low-noise final output
- **Input capacitor order**: C20 (bulk, farther) and C26 (ceramic, close to IC)
- **Output capacitor order**: C17 (ceramic, close to IC) and C21 (bulk, farther)
- **LED indicator**: Green LED (LED2) with 1kΩ current-limiting resistor shows +12V rail is active
- **Dropout voltage**: LM7812 requires ~2V dropout, so 13.5V input provides 1.5V headroom

**Protection Circuit (+12V Rail, 1.2A target, 1.5A max):**
- **Protection layers**: LM7812 current limiting (~2.2A max) → LM7812 thermal shutdown (150°C) → PTC1 trips (&gt;3A) → USB-PD adapter protection
- **PTC1**: C7529589 (SMD1210P150TF/16) - 1.5A hold, 3A trip, auto-reset fuse
- **TVS1**: SMAJ15A (unidirectional, 15V) - Overvoltage protection (cathode to +12V OUT, anode to GND)
- **Operation**: Normal (&lt;1.5A) = PTC low resistance, LED on; Overload (1.5A-3A) = PTC heats/trips in 1-5s; Short circuit (&gt;3A) = LM7812 current limiting + PTC trips in 0.5-5s; Auto-reset after 30-60s cooling

<details>
<summary>View ASCII art circuit</summary>

```
Regulator IC:
                    ┌──────────────────┐
+13.5V IN ──────────┤1 IN         OUT 3├──────────── +12V OUT
                    │                  │
                 ┌──┤2 GND             │
                 │  └──────────────────┘
                GND      LM7812
                        (TO-263-2)

Input Capacitors (C26 closest to IC):
+13.5V ──┬────────────────┬─── To IC Pin 1
         │                │
        C20              C26
       470µF            470nF
    electrolytic       ceramic
     (farther)        (CLOSE!)
         │                │
        GND              GND

Output Capacitors (C17 closest to IC):
From IC Pin 3 ──┬────────────────┬─── +12V
                │                │
               C17              C21
              100nF            470µF
             ceramic        electrolytic
             (CLOSE!)        (farther)
                │                │
               GND              GND

Status LED:
+12V ──── R14 (1kΩ) ──── LED2 (Green) ──── GND

Protection Circuit:
+12V OUT ─── PTC1 ───┬─→ To Load
      (1.5A hold)    │
      (3A trip)      │
                    ┌┴┐ TVS1 (SMAJ15A)
                    │ │ Cathode up
                    └┬┘ Anode down
                     │
                    GND
```

</details>
