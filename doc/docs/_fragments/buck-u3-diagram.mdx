import CircuitSvg from '@site/src/components/CircuitSvg';
import BuckU3Svg from '@site/static/circuits/buck-u3-diagram.svg';

<CircuitSvg src={BuckU3Svg} alt="LM2596S Buck Converter U3" padding="10px" />

**Key Points:**

- **Switching node** is the junction at OUTPUT pin 2
- **Path 1**: Switching node → L2 → +7.5V output (main current path)
- **Path 2**: Switching node → D2 cathode; D2 anode → GND (flyback/freewheeling path)
- **D2** has exactly 2 connections: cathode to switching node, anode to GND
- **L2 output and D2 anode are completely separate paths** - they do NOT connect to each other

<details>
<summary>View ASCII art circuit</summary>

```
Input:  +15V ──┬─── C9 (100µF) ─── GND
               │
               └─── C10 (100nF) ─── GND


Controller: U3 (LM2596S-ADJ)

  +15V ────────┤ VIN (1)

  OUTPUT (2) ├─── Switching Node

  FB (4) ├───→ Tap (see feedback network below)

  GND ─────────┤ GND (3)
               │ ON/OFF (5)  (always-on: tie to GND or leave floating)


Switching Node splits into TWO paths:

  Path 1 (to output):
    Switching Node ──→ L2 (100µH, 4.5A) ──→ +7.5V Out

  Path 2 (flyback):
    Switching Node ──→ D2 cathode (SS34 Schottky)
                       D2 anode ──→ GND


Output Filter:

  +7.5V Out ──→ C7 (470µF/25V) ──→ GND
```

### Feedback Network (Voltage Divider with Compensation)

```
Feedback Network (Voltage Divider with Compensation):
+7.5V ──┬─── R3 (5.1kΩ) ──┬─── R4 (1kΩ) ─── GND
        │                 │
        └─── C32 (22nF) ──┤
                          │
                         Tap → To IC Pin 4 (FB)

Components:
- R3 (5.1kΩ) with C32 (22nF) in parallel: Creates pole-zero compensation (Type II)
- R4 (1kΩ): Sets feedback tap voltage
- C32 (22nF ceramic): Feedback compensation capacitor in parallel with R3
  - Improves transient response and loop stability
  - Reduces switching noise on feedback line
  - Prevents oscillation

Tap voltage = +7.5V × R4/(R3+R4) = 7.5V × 1kΩ/6.1kΩ = 1.23V
U3 maintains FB pin at 1.23V reference by adjusting duty cycle
```

</details>
